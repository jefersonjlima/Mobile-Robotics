\documentclass{beamer}
\usetheme{simple}
\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usefonttheme[onlymath]{serif}
\usepackage[scale=2]{ccicons}

\usepackage{graphicx,hyperref,url,pgfplots}
\usepackage{amsmath} 
\usepackage{array,booktabs}
\pgfplotsset{compat=1.15}
\pgfplotsset{width=7cm}
\pgfplotsset{%
  colormap={whitered}{color(0cm)=(white);
  color(1cm)=(orange!75!red)}

\setbeamercovered{invisible}
\newcommand{\pausar}{\pause}
\newcommand{\df}[1]{\,\mathrm{d}#1}
\newcommand{\parcial}[3]{\dfrac{\partial^{#1}#2}{\partial #3^{#1}}}

\usepackage{tikz}
\usepackage{xcolor}
\usetikzlibrary{scopes}
\usepackage{verbatim}
\usetikzlibrary{patterns}

\usepackage{listings}
	\definecolor{codegreen}{rgb}{0,0.6,0}
	\definecolor{codegray}{rgb}{0.5,0.5,0.5}
	\definecolor{codepurple}{rgb}{0.58,0,0.82}
	\definecolor{backcolour}{rgb}{0.92,0.92,0.92}
	\lstset{language=Python, 
	backgroundcolor=\color{backcolour},   
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\fontsize{8}{11}\ttfamily,
	frame=lines,
%	numbers=left,
	tabsize=2,
	morekeywords={models, lambda, forms}}


\title{Filtro de Kalman}
\subtitle{Introdução - Sistemas Lineares}
\date{\today}
\author{Jeferson Lima}
\institute{\url{http://gitlab.com/jeferson.lima}}

\begin{document}

\maketitle

\begin{frame}{Informações Úteis}
	\begin{block}{Material disponível em:}
		\href{Robótica Móvel - Wiki}{https://gitlab.com/cursoseaulas/robotica-movel/-/wikis/home}
	\end{block}
	\pausar
	\begin{block}{Datas Importantes}
		\begin{itemize}
		\item Entrega
		\item Envio
		\end{itemize}
	\end{block}
	\pausar
	\begin{block}{Requisitos da Disciplina}
		\begin{itemize}
		\item Teoria de Controle
		\item Linguagem de Programação - \textbf{Python} ou \textbf{C++}
		\item Eletrônica
		\end{itemize}
	\end{block}
\end{frame}

%-----------------------------------------------------------------

\begin{frame}{Teorema de Bayes}
    \framesubtitle{Revisão}    
  \begin{itemize}
    \item Estado Estimado $x$ de um sistema observado $z$ e com controle em $u$.
    \item Objetivo:
  \end{itemize}

  \begin{equation}
    p(x|z,u)
  \end{equation}
\end{frame}


\begin{frame}{Filtro Bayes}
    \framesubtitle{Revisão}
    
    \begin{block}{}
        \begin{equation*}
            bel(x_t) = \eta p(z_t| x_t) \int p(x_t| u_t, x_{t-1}) bel(x_{t-1})dx_{t-1}
        \end{equation*}
    \end{block}

    \begin{itemize}
        \item Predição
        
        \begin{equation*}
            \overline{bel}(x_t) = \int p(x_t| u_t, x_{t-1}) bel(x_{t-1})dx_{t-1}
        \end{equation*}

        \item Correção

        \begin{equation*}
            bel(x_t) = \eta p(z_t| x_t) \int p(x_t| u_t, x_{t}) \overline{bel}(x_{t})dx_{t-1}
        \end{equation*}
    \end{itemize}
\end{frame}


\begin{frame}{Distribuição Normal (Gaussiana)}
    \framesubtitle{Revisão}  
    \begin{itemize}
        \item Uma Variável:
    \end{itemize}

    \begin{block}{}
        \begin{equation*}
            f(x) = \dfrac{1}{\sqrt{2\pi\sigma^2}}\cdot 
        \exp\left\{-\frac{(x-\mu)^2}{2\sigma^2}\right\}
        \end{equation*}
    \end{block}

    \input{images/gauss_1d.tex}
\end{frame}


\begin{frame}{Distribuição Normal (Gaussiana)}
    \framesubtitle{Revisão}  
    \begin{itemize}
        \item Bivariável:
    \end{itemize}

    \begin{tikzpicture}[
        declare function = {mu1=1;},
        declare function = {mu2=2;},
        declare function = {sigma1=0.5;},
        declare function = {sigma2=1;},
        declare function = {normal(\m,\s)=1/(2*\s*sqrt(pi))*exp(-(x-\m)^2/(2*\s^2));},
        declare function = {bivar(\ma,\sa,\mb,\sb)=
          1/(2*pi*\sa*\sb) * exp(-((x-\ma)^2/\sa^2 + (y-\mb)^2/\sb^2))/2;}]
        \begin{axis}[
          colormap name  = whitered,
          width          = 15cm,
          view           = {45}{65},
          enlargelimits  = false,
          grid           = major,
          domain         = -1:4,
          y domain       = -1:4,
          samples        = 26,
          xlabel         = $x_1$,
          ylabel         = $x_2$,
          zlabel         = {$P$},
          colorbar,
          colorbar style = {
            at     = {(1,0)},
            anchor = south west,
            height = 0.25*\pgfkeysvalueof{/pgfplots/parent axis height},
            title  = {$P(x_1,x_2)$}
          }
        ]
          \addplot3 [surf] {bivar(mu1,sigma1,mu2,sigma2)};
          \addplot3 [domain=-1:4,samples=31, samples y=0, thick, smooth]
            (x,4,{normal(mu1,sigma1)});
          \addplot3 [domain=-1:4,samples=31, samples y=0, thick, smooth]
            (-1,x,{normal(mu2,sigma2)});
      
          \draw [black!50] (axis cs:-1,0,0) -- (axis cs:4,0,0);
          \draw [black!50] (axis cs:0,-1,0) -- (axis cs:0,4,0);
      
          \node at (axis cs:-1,1,0.18) [pin=165:$P(x_1)$] {};
          \node at (axis cs:1.5,4,0.32) [pin=-15:$P(x_2)$] {};
        \end{axis}
      \end{tikzpicture}



\end{frame}



\begin{frame}{Modelos Lineares}
    \begin{itemize}
        \item Assumindo que o modelo é linear;
        \item Com ruído Gaussiano ()
    \end{itemize}

    \begin{align} 
        x_t &= A_t x_{t-1} + B u_t + \epsilon_t\\ 
        z_t &= C_t x_t + \delta_t
        \end{align}

        $A_t$ Matriz $(n \times n)$ que descreve os estados do modelo.

        $B_t$ Matriz $(n \times l)$ que descreve os estados do controle.

        $C_t$ Matrix $(k\times n)$ sendo os estados de $x_t$

        $\epsilon_t$ Variável aleatória do processo.

        $\delta_t$ Rúido aleatório com distribuição normal e covariância de $R_t$ e $Q_t$ respectivamente.

\end{frame}


\begin{frame}{KF, EKF e UKF}
  teste
\end{frame}

\begin{frame}[t]{Referências}
    \begin{itemize}
        \item http://www.embarcados.com.br/arduino-entradasaidas-digitais/
        \item \href{https://www.youtube.com/watch?v=DE6Jn2cB4J4&list=PLgnQpQtFTOGQrZ4O5QzbIHgl3b1JHimN_&index=5}{aula kalman} 
        \item \href{https://www.youtube.com/watch?v=QZ5q59H2qaI}{Fusion Odometry and IMU}
        \item http://www.ic.uff.br/~bianca/ia-20091/aulas/IA-Aula11.ppt (crença)
    \end{itemize}
\end{frame}
\end{document}